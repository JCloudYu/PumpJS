!function(){function n(n,t,o){return new Promise(function(r,i){t=t||"./components",o=arguments.length>2?$(o):null;var u=t+"/"+n+"/";$.getJSON(u+"component.json",function(n){var t=[],c=[],s=[],a=n.components||[],p=[],f=o||$("body"),l=o?f.after:f.append;a.forEach(function(n){n.view&&t.push(u+n.view),n.script&&c.push(u+n.script),n.style&&s.push(u+n.style)}),$.unique(c).forEach(function(n){p.push(e(n,"js",o))}),$.unique(t).forEach(function(n){p.push(new Promise(function(e,t){$.get(n,function(n){$(n).each(function(n,e){l.call(f,e)}),e()},"text").fail(t)}))}),$.unique(s).forEach(function(n){p.push(e(n,"css",o))}),0==p.length&&p.push(new Promise(function(n){n()})),Promise.all(p).then(r)["catch"](i)}).fail(i)})}function e(n,e,t){return new Promise(function(o,r){var i,u;switch(e){case"css":i=document.createElement("link"),i.rel="stylesheet",i.type="text/css",i.href=n;break;case"js":i=document.createElement("script"),i.type="application/javascript",i.src=n;break;default:return null}i.onload=o,i.onerror=r,t?(t=t[0],u=t.parentElement):(t=null,u=$("body")[0]),u.insertBefore(i,t)})}function t(n){return function(){return Promise.all(n)}}window.pipe=window.pipe||function(n){if(!Array.isArray(n))return!1;var o,r=[],i=new Promise(function(n){o=n});return n.forEach(function(n){return"string"==typeof n?void r.push(e(n,"js")):(i=i.then(t(r)),r=[],void("function"==typeof n&&(i=i.then(function(){setTimeout(n,0)}))))}),r.length>0&&(i=i.then(t(r))),setTimeout(o,0),i},function(){var e="./components";window.pipe.components=window.pipe.components||function(t){if(!Array.isArray(t))return!1;var o=[];return t.forEach(function(t){var r=[];"string"==typeof t?r.push(t):r.push(t.name,t.basePath||e,t.anchor),o.push(n.apply(null,r))}),Promise.all(o)},window.pipe.components.base_path=function(n){e=n||"./components"}}()}();
