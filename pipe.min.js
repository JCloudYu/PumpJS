!function(){function n(n,t,o){return t=t||"./components",o=o?$(o):null,new Promise(function(r,i){var c=t+"/"+n+"/";$.getJSON(c+"component.json",function(n){var t=[],s=[],u=n.components||[],a=[];u.forEach(function(n){var r,i=n.anchor?$(n.anchor):o,u=i||$("body"),p=i?u.before:u.prepend;n.style&&(r=c+n.style,$.inArray(r,s)<0&&(a.push(e(r,"css",i)),s.push(r))),n.view&&a.push(new Promise(function(e,t){$.get(c+n.view,function(n){$(n).each(function(n,e){p.call(u,e)}),e()},"text").fail(t)})),n.script&&(r=c+n.script,$.inArray(r,t)<0&&(a.push(e(r,"js",i,!0)),t.push(r)))}),0==a.length&&a.push(new Promise(function(n){n()})),Promise.all(a).then(r)["catch"](i)}).fail(i)})}function e(n,e,t,o){return new Promise(function(r,i){var c,s;switch(e){case"css":c=document.createElement("link"),c.rel="stylesheet",c.type="text/css",c.href=n;break;case"js":c=document.createElement("script"),c.type="application/javascript",c.src=n;break;default:return null}c.onload=r,c.onerror=i,t?(t=t[0],s=t.parentElement):(t=null,s=$("body")[0]),o?setTimeout(function(){s.insertBefore(c,t)},0):s.insertBefore(c,t)})}function t(n){return function(){var t=[];return n.forEach(function(n){t.push(e(n,"js"))}),Promise.all(t)}}window.pipe=window.pipe||function(n){if(!Array.isArray(n))return!1;var e,o=[],r=new Promise(function(n){e=n});return n.forEach(function(n){return"string"==typeof n?void o.push(n):(r=r.then(t(o)),o=[],void("function"==typeof n&&(r=r.then(n))))}),o.length>0&&(r=r.then(t(o))),setTimeout(e,0),r},function(){var e="./components";window.pipe.components=window.pipe.components||function(t){if(!Array.isArray(t))return!1;var o=[];return t.forEach(function(t){var r=[];"string"==typeof t?r.push(t):r.push(t.name,t.basePath||e,t.anchor),o.push(n.apply(null,r))}),Promise.all(o)},window.pipe.components.base_path=function(n){e=n||"./components"}}()}();
