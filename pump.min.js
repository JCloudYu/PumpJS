!function(n){"use strict";var r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t=r.length,u=function(n){return"function"==typeof n},i=function(){var n,u,i,e,o=[0];return function(f){for(f=f||"",n="",u=i=0,e=1;e>0;){if(i=o[u]+e,!(i>=t)){o[u]=i;break}o[u]=i-t,o[u+1]=o[u+1]||0,e=1,u++}for(u=0;u<o.length;u++)n=r.charAt(o[u])+n;return f+n}}(),e=function(){},o=function(n){var o={},f={},c=function(){for(var n="",u=5;u-- >0;)n+=r.charAt(t*Math.random()|0);return n}(),a=function(n,r,t,u,i){function e(n,r,t,u,i){return i?void setTimeout(function(){n.__fireEvent({type:t,target:null,source:r},u)},0):void n.__fireEvent({type:t,target:null,source:r},u)}var o;if(r){if(!(o=s(r)))return;e(o,n,t,u,i)}else for(var c in f)f.hasOwnProperty(c)&&e(f[c],n,t,u,i)},l=function(n,r,t,i){n=n||"",r=r||null,t=u(t)?t:null,i=arguments.length>2?!!i:!0;var e=f[n];return e&&r&&t?(e.__regEvent(r,t,i),!0):!1},s=function(n){return o[n]||f[n]||null},v=function(){var n={};return{__fireEvent:function(r,t){var u=["*",r.type];u.forEach(function(u){var i=n[u];Array.isArray(i)&&i.forEach(function(n){var u=function(){n.cb(r,t)};return n.async?void setTimeout(u,0):void u()})})},__regEvent:function(r,t,u){r.split(",").forEach(function(r){n.hasOwnProperty(r)||(n[r]=[]),n[r].push({cb:t,async:u})})}}},h=function(n){return{getId:function(){return n},on:function(r,t,i){for(var e=Array.prototype.slice.call(arguments),o=[],f=[],c=!1;e.length>0;){var a=e.shift();c||u(a)?(c=c||!0,f.push(a)):o.push(a)}return f.unshift(o.length>0?o.join(","):null),f.unshift(n),l.apply(null,f),this},fire:function(r,t,u){return u=u||!1,a(n,null,r,t,u),this},fireTarget:function(r,t,u,i){return i=i||!1,a(n,r,t,u,i),this}}},p=function(n,r){u(n)&&(r=n,n=void 0);var t=u(r),a=t?r:e,l=i(c),s=h(l);f[l]=v(),f[l]._interface=a(s)||{};var p=n||null;return p&&(o[p]=f[l]),s};return n=n||{},n.instantiate=p,n.fire=function(n,r,t){return t=t||!1,a(null,null,n,r,t),this},n.fireTarget=function(n,r,t,u){return u=u||!1,a(null,n,r,t,u),this},n.instance=function(n){var r=s(n);return r?r._interface:null},n},f=o(),c=n.pump||void 0,a=function(){return this instanceof a?void o(this):f};a.prevPump=function(){return c};for(var l in f)f.hasOwnProperty(l)&&(a[l]=f[l]);n.pump=a}(window);
