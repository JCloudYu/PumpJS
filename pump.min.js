!function(){"use strict";var n=new Function("try{return this===global}catch(e){return false}")(),t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=t.length,u=function(n){return"function"==typeof n},e=function(){var n,u,e,i,o=[0];return function(f){for(f=f||"",n="",u=e=0,i=1;i>0;){if(e=o[u]+i,!(e>=r)){o[u]=e;break}o[u]=e-r,o[u+1]=o[u+1]||0,i=1,u++}for(u=0;u<o.length;u++)n=t.charAt(o[u])+n;return f+n}}(),i=function(){},o=function(n){var o={},f={},c=function(){for(var n="",u=5;u-- >0;)n+=t.charAt(r*Math.random()|0);return n}(),a=function(n,t,r,u,e){function i(n,t,r,u,e){return e?void setTimeout(function(){n.__fireEvent({type:r,target:null,source:t},u)},0):void n.__fireEvent({type:r,target:null,source:t},u)}var o;if(t){if(!(o=s(t)))return;i(o,n,r,u,e)}else for(var c in f)f.hasOwnProperty(c)&&i(f[c],n,r,u,e)},l=function(n,t,r,e){n=n||"",t=t||null,r=u(r)?r:null,e=arguments.length>2?!!e:!0;var i=f[n];return i&&t&&r?(i.__regEvent(t,r,e),!0):!1},s=function(n){return o[n]||f[n]||null},v=function(){var n={};return{__fireEvent:function(t,r){var u=["*",t.type];u.forEach(function(u){var e=n[u];Array.isArray(e)&&e.forEach(function(n){var u=function(){n.cb(t,r)};return n.async?void setTimeout(u,0):void u()})})},__regEvent:function(t,r,u){t.split(",").forEach(function(t){n.hasOwnProperty(t)||(n[t]=[]),n[t].push({cb:r,async:u})})}}},h=function(n){return{getId:function(){return n},on:function(t,r,e){for(var i=Array.prototype.slice.call(arguments),o=[],f=[],c=!1;i.length>0;){var a=i.shift();c||u(a)?(c=c||!0,f.push(a)):o.push(a)}return f.unshift(o.length>0?o.join(","):null),f.unshift(n),l.apply(null,f),this},fire:function(t,r,u){return u=u||!1,a(n,null,t,r,u),this},fireTarget:function(t,r,u,e){return e=e||!1,a(n,t,r,u,e),this}}},p=function(n,t){u(n)&&(t=n,n=void 0);var r=u(t),a=r?t:i,l=e(c),s=h(l);f[l]=v(),f[l]._interface=a(s)||{};var p=n||null;return p&&(o[p]=f[l]),s};return n=n||{},n.instantiate=p,n.fire=function(n,t,r){return r=r||!1,a(null,null,n,t,r),this},n.fireTarget=function(n,t,r,u){return u=u||!1,a(null,n,t,r,u),this},n.instance=function(n){var t=s(n);return t?t._interface:null},n},f=o(),c=function(){return this instanceof c?void o(this):f};for(var a in f)f.hasOwnProperty(a)&&(c[a]=f[a]);n?module.exports=c:(c.prevPump=function(n){return function(){return n}}(window.pump||void 0),window.pump=c)}();
